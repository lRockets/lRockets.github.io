---
title: 性能优化
date: 2020-04-25
tags:
 - 性能优化
categories:
 -  javascript
---

## URL解析



## DNS解析



## TCP三次握手，建立客户端和服务器端的链接通信



## 发送HTTP请求



## 服务器处理和响应



## TCP的四次挥手：关闭客户端与服务器端的链接通道



## 浏览器解析渲染

浏览器在内存条中开辟一块栈内存，用来给代码的执行提供环境，同时分配一个主进程去一行行的解析和执行代码；`当浏览器遇到link、script、img请求时，会开辟全新的线程去加载资源文件`

`css`选择器 渲染，从右向左

`@import`是同步的，`link`是异步的，应避免使用`@import`



### 浏览器渲染页面机制与原理

第一次自上而下走完后，只生成`DOM`树（优化技巧：标签语义化，避免深层次嵌套）

`CSS`处理完成后,生成`CSSOM`（优化技巧：选择器层级）

`DOM`树和`CSSOM`生成渲染树  `Render Tree`

回流：根据生成的渲染树，计算他们在设备视口（`viewport`）内的确切位置和大小，这个计算阶段就是回流

重绘：根据渲染树以及回流得到的几何信息，得到节点的绝对像素

将像素发送给`GPU`,展示在页面上

​	

### DOM重绘与回流

#### 重绘

元素样式的改变(宽高，大小，位置等不变)

#### 回流

元素的大小或者位置发生变化

#### 注意

回流一定会触发重绘，而重绘不定会回流

### 性能优化

#### 减少HTTP的请求次数和大小

- [ ] 资源合并和压缩
- [ ] 图片懒加载
- [ ] 音视频走流文件 `m3u8`

#### 避免DOM的回流

- [ ] 放弃传统操作dom的时代，基于vue/react开始数据影响视图模式
- [ ] 分离读写操作
- [ ] 样式集中能够改变
- [ ] 动画效果应用到`position`为`absolute`或`fixed`的元素上 （脱离文档流）
- [ ] `css3`硬件加速 （`GPU`加速）使用`transform opacity`这些属性，不会引起回流和重绘
- [ ] 避免`table`布局和使用`css`的`js`表达式

